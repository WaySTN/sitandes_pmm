<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white">

    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/app_bar_layout"
        android:layout_width="match_parent"
        android:layout_height="280dp"
        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"
        android:background="@color/white">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            android:id="@+id/collapsing_toolbar"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            app:layout_scrollFlags="scroll|exitUntilCollapsed"
            app:contentScrim="@color/primary_green"
            app:expandedTitleMarginStart="24dp"
            app:expandedTitleMarginBottom="32dp"
            app:collapsedTitleTextColor="@color/white"
            app:expandedTitleTextColor="@color/white">

            <!-- Background putih untuk area foto -->
            <View
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@color/gray_light"
                app:layout_collapseMode="parallax" />

            <!-- Image View untuk foto alat -->
            <ImageView
                android:id="@+id/iv_foto_alat_detail"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:scaleType="centerCrop"
                android:src="@drawable/ic_image_placeholder"
                android:background="@color/gray_light"
                app:layout_collapseMode="parallax" />

            <!-- Gradient overlay yang lebih ringan -->
            <View
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="@drawable/gradient_overlay_detail"
                app:layout_collapseMode="parallax" />

            <!-- Status Badge -->
            <com.google.android.material.card.MaterialCardView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="top|end"
                android:layout_margin="16dp"
                app:cardCornerRadius="16dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="@color/primary_green"
                app:layout_collapseMode="pin">

                <TextView
                    android:id="@+id/tv_status_detail"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Tersedia"
                    android:textSize="12sp"
                    android:textStyle="bold"
                    android:textColor="@color/white"
                    android:paddingStart="12dp"
                    android:paddingEnd="12dp"
                    android:paddingTop="6dp"
                    android:paddingBottom="6dp" />

            </com.google.android.material.card.MaterialCardView>

            <!-- Toolbar -->
            <androidx.appcompat.widget.Toolbar
                android:id="@+id/toolbar_detail"
                android:layout_width="match_parent"
                android:layout_height="?attr/actionBarSize"
                android:background="@android:color/transparent"
                app:layout_collapseMode="pin"
                app:navigationIcon="@drawable/ic_arrow_back"
                app:navigationIconTint="@color/white" />

        </com.google.android.material.appbar.CollapsingToolbarLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/background_light"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:background="@color/background_light">

            <!-- Header Info Card -->
            <com.google.android.material.card.MaterialCardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="16dp"
                android:layout_marginTop="8dp"
                app:cardCornerRadius="16dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="@color/white">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="20dp"
                    android:background="@color/white">

                    <!-- Nama dan Harga -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:gravity="center_vertical"
                        android:layout_marginBottom="12dp">

                        <LinearLayout
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <TextView
                                android:id="@+id/tv_nama_alat_detail"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Traktor Kubota L3408"
                                android:textSize="20sp"
                                android:textStyle="bold"
                                android:textColor="@color/text_primary"
                                android:layout_marginBottom="4dp" />

                            <TextView
                                android:id="@+id/tv_harga_detail"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Rp 50.000/hari"
                                android:textSize="16sp"
                                android:textStyle="bold"
                                android:textColor="@color/primary_green" />

                        </LinearLayout>

                        <com.google.android.material.card.MaterialCardView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            app:cardCornerRadius="8dp"
                            app:cardElevation="2dp"
                            app:cardBackgroundColor="@color/background_light">

                            <TextView
                                android:id="@+id/tv_stok_detail"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Stok: 1"
                                android:textSize="12sp"
                                android:textColor="@color/text_secondary"
                                android:padding="8dp" />

                        </com.google.android.material.card.MaterialCardView>

                    </LinearLayout>

                    <!-- Kelompok Tani Info -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="12dp"
                        app:cardCornerRadius="12dp"
                        app:cardElevation="0dp"
                        app:cardBackgroundColor="@color/background_light"
                        app:strokeWidth="1dp"
                        app:strokeColor="@color/gray_light">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:padding="12dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_group"
                                android:layout_marginEnd="12dp"
                                app:tint="@color/primary_green" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Pemilik"
                                    android:textSize="11sp"
                                    android:textColor="@color/text_secondary" />

                                <TextView
                                    android:id="@+id/tv_kelompok_tani_detail"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Kelompok Tani Panggang Makmur"
                                    android:textSize="13sp"
                                    android:textStyle="bold"
                                    android:textColor="@color/text_primary"
                                    android:layout_marginBottom="2dp" />

                                <TextView
                                    android:id="@+id/tv_nama_ketua_detail"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Pak Sumandi"
                                    android:textSize="12sp"
                                    android:textColor="@color/text_secondary" />

                            </LinearLayout>

                        </LinearLayout>

                    </com.google.android.material.card.MaterialCardView>

                    <!-- Alamat Info -->
                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        app:cardCornerRadius="12dp"
                        app:cardElevation="0dp"
                        app:cardBackgroundColor="@color/background_light"
                        app:strokeWidth="1dp"
                        app:strokeColor="@color/gray_light">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center_vertical"
                            android:padding="12dp">

                            <ImageView
                                android:layout_width="20dp"
                                android:layout_height="20dp"
                                android:src="@drawable/ic_location"
                                android:layout_marginEnd="12dp"
                                app:tint="@color/primary_green" />

                            <LinearLayout
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="1"
                                android:orientation="vertical">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Alamat"
                                    android:textSize="11sp"
                                    android:textColor="@color/text_secondary" />

                                <TextView
                                    android:id="@+id/tv_alamat_detail"
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Dusun Panggang, Jember"
                                    android:textSize="13sp"
                                    android:textStyle="bold"
                                    android:textColor="@color/text_primary" />

                            </LinearLayout>

                        </LinearLayout>

                    </com.google.android.material.card.MaterialCardView>

                </LinearLayout>

            </com.google.android.material.card.MaterialCardView>

            <!-- Deskripsi -->
            <com.google.android.material.card.MaterialCardView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginStart="16dp"
                android:layout_marginEnd="16dp"
                android:layout_marginBottom="100dp"
                app:cardCornerRadius="16dp"
                app:cardElevation="4dp"
                app:cardBackgroundColor="@color/white">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="20dp"
                    android:background="@color/white">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Deskripsi"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="@color/text_primary"
                        android:layout_marginBottom="12dp" />

                    <TextView
                        android:id="@+id/tv_deskripsi_detail"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Traktor Kubota L3408 dalam kondisi sangat baik dan terawat. Cocok untuk mengolah lahan pertanian dengan area sedang hingga luas. Dilengkapi dengan sistem hidrolik yang responsif dan mesin yang irit bahan bakar."
                        android:textSize="14sp"
                        android:textColor="@color/text_secondary"
                        android:lineSpacingExtra="4dp" />

                </LinearLayout>

            </com.google.android.material.card.MaterialCardView>

        </LinearLayout>

    </androidx.core.widget.NestedScrollView>

    <!-- Bottom Action Button -->
    <com.google.android.material.card.MaterialCardView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        app:cardCornerRadius="0dp"
        app:cardElevation="8dp"
        app:cardBackgroundColor="@color/white">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:background="@color/white"
            android:padding="16dp">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/btn_pesan_whatsapp"
                android:layout_width="match_parent"
                android:layout_height="48dp"
                android:text="Pesan via WhatsApp"
                android:textSize="14sp"
                android:textStyle="bold"
                android:textColor="@color/white"
                android:backgroundTint="@color/primary_green"
                app:cornerRadius="24dp"
                app:icon="@drawable/ic_whatsapp"
                app:iconSize="20dp"
                app:iconTint="@color/white"
                app:iconGravity="textStart"
                app:iconPadding="8dp" />

        </LinearLayout>

    </com.google.android.material.card.MaterialCardView>

</androidx.coordinatorlayout.widget.CoordinatorLayout>